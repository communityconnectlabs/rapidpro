
# -----------------------------------------------------------------------------------
# Sample RapidPro settings file, this should allow you to deploy RapidPro locally on
# a PostgreSQL database.
#
# The following are requirements:
#     - a postgreSQL database named 'temba', with a user name 'temba' and
#       password 'temba' (with postgis extensions installed)
#     - a redis instance listening on localhost
# -----------------------------------------------------------------------------------

import copy
import warnings
import importlib
from .settings_common import *  # noqa

# MUST NOT INCLUDE IN PROD
import_attributes = {}
settings_module = os.environ.get("TEMBA_SETTINGS", "temba.settings_dev")
if settings_module and settings_module != "temba.settings":
    extended = importlib.import_module(settings_module)
    # Get all attributes defined in the module, excluding those that are imported or inherited
    consider = dir(extended)
    import_attributes = {}
    for name in consider:
        c = False
        if name.startswith("__"):
            continue
        x = getattr(extended, name)
        if isinstance(x, str):
            pass
        elif isinstance(x, dict):
            pass
        elif isinstance(x, list):
            pass
        elif isinstance(x, tuple):
            pass
        elif isinstance(x, int):
            pass
        elif isinstance(x, float):
            pass
        elif isinstance(x, bool):
            pass
        elif x is None:
            pass
        else:
            continue
        import_attributes[name] = x
    # Add filtered attributes to the global scope
    globals().update(import_attributes)
