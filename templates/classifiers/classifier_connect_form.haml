-extends "smartmin/form.html"
-load compress temba smartmin i18n

-block title
  {{ title }}


-block pre-form
  .mb-4
    {% include form_blurb %}


-block fields
  -if override_form
    #file-upload
      %input(type="file" name="file" id="import-file" onchange='onFileChange()')
      #real-button.flex.mb-4
        %input(type="text" id="file-field")
        .button-light.ml-4(style="margin-top:-1px")
          -trans "Choose File"
      %div#import_file_errors
        {{ form.file.errors }}
  -else
    {{ block.super }}


-block extra-script
  {{ block.super }}
  -if override_form
    :javascript
      function onFileChange() {
        var file = $('#import-file').val();
        while (file.indexOf('\\') >= 0) {
          file = file.substring(file.indexOf('\\') + 1, file.length);
        }
        $('#file-field').val(file);
      }

-block extra-style
  -if override_form
    :css
      input {
        padding: 9px;
        cursor: pointer;
        box-shadow: rgba(0, 0, 0, 0.1) 0px 0px 0px 1px, rgba(0, 0, 0, 0.04) 0px 3px 20px 0px, rgba(0, 0, 0, 0.02) 0px 1px 2px 0px;
      }

      #file-upload {
        position: relative;
      }

      #real-button {
        position: relative;
        top: 0;
        left: 0;
        z-index: 1;
      }

      #file-field {
        width: 300px;
        height: 35px;
        font-size: 16px;
        margin-bottom: 0px;
        border-radius: 5px;
      }

      #import-file {
        position: absolute;
        width: 450px;
        height: 35px;
        top: 0;
        left: 0;
        text-align: right;
        -moz-opacity:0 ;
        filter: alpha(opacity: 0);
        opacity: 0;
        z-index: 2;
      }

